builds:

- id: allocator
  dir: ./cmd/allocator
  ldflags: &build-meta
  - -X purelb.io/internal/logging.commit={{.Git.ShortCommit}}
  - -X purelb.io/internal/logging.branch={{.Git.Branch}}
  - -X purelb.io/internal/logging.release={{.Env.TAG}}

- id: lbnodeagent
  dir: ./cmd/lbnodeagent
  ldflags: *build-meta

defaultPlatforms:
- linux/arm64
- linux/amd64

defaultBaseImage: gcr.io/distroless/static:nonroot

baseImageOverrides:
  purelb.io/cmd/lbnodeagent: gcr.io/distroless/static:latest
